{% extends "base.html" %}
{% block content %}

<div class="container-principal">

    <div class="form-card">
        <form method="POST">
            <input type="text" name="titulo-tarefa" 
                id="titulo-tarefa" placeholder="TÃ­tulo da tarefa" 
                required value="{{ tarefa_selecionada.titulo_tarefa if tarefa_selecionada else '' }}">
            
            <input type="date" name="data-conclusao" 
                id="data-conclusao" value="{{ tarefa_selecionada.data_conclusao if tarefa_selecionada else '' }}">

            <div class="form-buttons">
                <button type="submit" class="btn-save">Salvar</button>

                {% if tarefa_selecionada %}
                    <a href="{{ url_for('agenda') }}" class="btn-cancel">Cancelar</a>
                {% endif %}
            </div>
        </form>
    </div>

    <h2>Lista de Tarefas</h2>

    <div class="tarefa-card">
        {% if tarefas %}
            <ul>
                {% for tarefa in tarefas %}
                   <li class="{% if tarefa.concluida == 1 %}tarefa-finalizada{% endif %}">
                        <span>{{ tarefa.titulo_tarefa }} - {{ tarefa.data_conclusao }}</span>
                        <div class="tarefa-actions"> <a href="{{ url_for('update', idTarefa=tarefa.id_tarefa) }}" class="btn-update">Editar</a>
        
                            {% if tarefa.concluida == 1 %}
                                <a href="{{ url_for('reabrir', idTarefa=tarefa.id_tarefa) }}" class="btn-reabrir">Reabrir</a>
                            {% else %}
                                <a href="{{ url_for('concluir', idTarefa=tarefa.id_tarefa) }}" class="btn-concluir">Concluir</a>
                                <a href="{{ url_for('delete', idTarefa=tarefa.id_tarefa) }}" class="btn-delete">Apagar</a>
                            {% endif %}
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="espaco-de-tarefas">
                <p>Nenhuma tarefa cadastrada</p>
            </div>
        {% endif %}
    </div>

</div>
{% endblock %}